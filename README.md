# User Segment Service

–°–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ (A/B-—Ç–µ—Å—Ç–æ–≤) –≤ —Ä–∞–º–∫–∞—Ö –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π VK.

## üöÄ –û–ø–∏—Å–∞–Ω–∏–µ

–°–µ—Ä–≤–∏—Å –ø–æ–∑–≤–æ–ª—è–µ—Ç:

- –°–æ–∑–¥–∞–≤–∞—Ç—å, –∏–∑–º–µ–Ω—è—Ç—å –∏ —É–¥–∞–ª—è—Ç—å —Å–µ–≥–º–µ–Ω—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –î–æ–±–∞–≤–ª—è—Ç—å –∏ —É–¥–∞–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ —Å–µ–≥–º–µ–Ω—Ç–æ–≤
- –†–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å —Å–µ–≥–º–µ–Ω—Ç—ã —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –Ω–∞ –∑–∞–¥–∞–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü–æ–ª—É—á–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –ø–æ `user_id` —á–µ—Ä–µ–∑ API

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Go 1.21
- Gin (REST API)
- GORM (Postgres ORM)
- PostgreSQL
- Docker / docker-compose

---

## ‚öôÔ∏è –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**

```bash
git clone https://github.com/yourusername/user-segment-service-pg.git
cd user-segment-service-pg
```
2. **–°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ docker-compose**

```bash
docker-compose up --build
```
3. **–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É**
```bash
go run cmd/main.go
```
## üìñ –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
| –ú–µ—Ç–æ–¥  | URL                           | –û–ø–∏—Å–∞–Ω–∏–µ                                         |
| ------ | ----------------------------- | ------------------------------------------------ |
| GET    | `/users/:id/segments`         | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–µ–≥–º–µ–Ω—Ç–æ–≤ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è       |
| POST   | `/segments`                   | –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–µ–≥–º–µ–Ω—Ç                            |
| PUT    | `/segments/:id`               | –û–±–Ω–æ–≤–∏—Ç—å —Å–µ–≥–º–µ–Ω—Ç                                 |
| DELETE | `/segments/:id`               | –£–¥–∞–ª–∏—Ç—å —Å–µ–≥–º–µ–Ω—Ç                                  |
| POST   | `/segments/:id/users/:userId` | –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–µ–≥–º–µ–Ω—Ç                  |
| DELETE | `/segments/:id/users/:userId` | –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ —Å–µ–≥–º–µ–Ω—Ç–∞                 |
| POST   | `/segments/:id/distribute`    | –†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–µ–≥–º–µ–Ω—Ç —Å–ª—É—á–∞–π–Ω–æ –Ω–∞ % –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |


## üìù –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –°–æ–∑–¥–∞—Ç—å —Å–µ–≥–º–µ–Ω—Ç

```bash
curl -X POST http://localhost:8080/segments \
  -H "Content-Type: application/json" \
  -d '{"name":"MAIL_GPT"}'
```
### –ü–æ–ª—É—á–∏—Ç—å —Å–µ–≥–º–µ–Ω—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```bash
curl http://localhost:8080/users/1/segments
```
